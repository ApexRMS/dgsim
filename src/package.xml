<?xml version="1.0" encoding="utf-8" ?>
<package name="dgsim" displayName="DG-Sim" description="Simulates demographics of wildlife populations" version="3.0.0" url="https://apexrms.github.io/dgsim/">

	<dataSheet name="AgeClass" displayName="Age Classes" dataScope="Project" displayMember="Name">
		<column name="Name" dataType="String"/>
		<column name="Description" dataType="String" isOptional="True"/>
	</dataSheet>

	<dataSheet name="Stratum" displayName="Strata" dataScope="Project" displayMember="Name">
		<column name="Name" dataType="String"/>
		<column name="Description" dataType="String" isOptional="True"/>
	</dataSheet>

	<dataSheet name="InitialPopulationSize" displayName="Initial Population Size" isSingleRow="True">
		<column name="Mean" dataType="Integer" validationType="WholeNumber" validationCondition="GreaterEqual" formula1="0"/>
		<column name="DistributionType" displayName="Distribution" dataType="Integer" validationType="Datasheet" formula1="core_DistributionType" isOptional="True"/>
		<column name="DistributionSD" displayName="Standard Deviation" dataType="Double" validationType="Decimal" validationCondition="Greater" formula1="0" isOptional="True"/>
		<column name="DistributionMin" displayName="Minimum" dataType="Integer" validationType="WholeNumber" validationCondition="Greater" formula1="0" isOptional="True"/>
		<column name="DistributionMax" displayName="Maximum" dataType="Integer" validationType="WholeNumber" validationCondition="Greater" formula1="0" isOptional="True"/>
		<validation validationType="LessEqual" columns="DistributionMin|DistributionMax"/>
	</dataSheet>

	<dataSheet name="InitialPopulationDistribution" displayName="Initial Population Distribution">
		<column name="StratumId" displayName="Stratum" dataType="Integer" validationType="Datasheet" formula1="Stratum" isOptional="True"/>
		<column name="Sex" dataType="Integer" validationType="List" formula1="0:Male|1:Female" isOptional="True"/>
		<column name="MinimumAge" displayName="MinimumAge" dataType="Integer" validationType="WholeNumber" validationCondition="GreaterEqual" formula1="0"/>
		<column name="MaximumAge" displayName="MaximumAge" dataType="Integer" validationType="WholeNumber"/>
		<column name="RelativeAmount" displayName="Relative Amount" dataType="Double" validationType="Decimal" validationCondition="GreaterEqual" formula1="0"/>
		<validation validationType="LessEqual" columns="MinimumAge|MaximumAge"/>
	</dataSheet>

	<dataSheet name="AgeClassRange" displayName="Age Class Ranges">
		<column name="AgeClassId" displayName="Age Class" dataType="Integer" validationType="Datasheet" formula1="AgeClass"/>
		<column name="MaximumAge" displayName="Maximum Age" dataType="Integer" validationType="WholeNumber" validationCondition="GreaterEqual" formula1="0"/>
	</dataSheet>

	<dataSheet name="OffspringPerFemaleOption" displayName="Offspring per Female Options" isSingleRow="True" viewClassName="SyncroSim.DGSim.OffspringPerFemaleDataFeedView" viewClassAssembly="SyncroSim.DGSim">
		<column name="BirthJulianDay" dataType="Integer" validationType="WholeNumber" validationCondition="Between" formula1="1" formula2="365"/>
	</dataSheet>

	<dataSheet name="OffspringPerFemaleValue" displayName="Offspring per Female Values" hasIteration="True" hasTimestep="True">
		<column name="CountJulianDay" displayName="Count Julian Day" dataType="Integer" validationType="WholeNumber" validationCondition="Between" formula1="1" formula2="365" isOptional="True"/>
		<column name="StratumId" displayName="Stratum" dataType="Integer" validationType="Datasheet" formula1="Stratum" isOptional="True"/>
		<column name="AgeClassId" displayName="Age Class" dataType="Integer" validationType="Datasheet" formula1="AgeClass" isOptional="True"/>
		<column name="Mean" dataType="Double" validationType="Decimal" validationCondition="GreaterEqual" formula1="0"/>
		<column name="DistributionType" displayName="Distribution" dataType="Integer" validationType="Datasheet" formula1="core_DistributionType" isOptional="True"/>
		<column name="DistributionSD" displayName="SD" dataType="Double" validationType="Decimal" validationCondition="Greater" formula1="0" isOptional="True"/>
		<column name="DistributionMin" displayName="Minimum" dataType="Double" validationType="Decimal" validationCondition="GreaterEqual" formula1="0" isOptional="True"/>
		<column name="DistributionMax" displayName="Maximum" dataType="Double" validationType="Decimal" validationCondition="GreaterEqual" formula1="0" isOptional="True"/>
	</dataSheet>

	<dataSheet name="AnnualizedMortalityRate" displayName="Annualized Mortality Rate" hasIteration="True" hasTimestep="True">
		<column name="JulianDay" displayName="Julian Day" dataType="Integer" validationType="WholeNumber" validationCondition="Between" formula1="1" formula2="365" isOptional="True"/>
		<column name="StratumId" displayName="Stratum" dataType="Integer" validationType="Datasheet" formula1="Stratum" isOptional="True"/>
		<column name="Sex" dataType="Integer" validationType="List" formula1="0:Male|1:Female" isOptional="True"/>
		<column name="AgeClassId" displayName="Age Class" dataType="Integer" validationType="Datasheet" formula1="AgeClass" isOptional="True"/>
		<column name="Mean" dataType="Double" validationType="Decimal" validationCondition="GreaterEqual" formula1="0"/>
		<column name="DistributionType" displayName="Distribution" dataType="Integer" validationType="Datasheet" formula1="core_DistributionType" isOptional="True"/>
		<column name="DistributionSD" displayName="SD" dataType="Double" validationType="Decimal" validationCondition="Greater" formula1="0" isOptional="True"/>
		<column name="DistributionMin" displayName="Minimum" dataType="Double" validationType="Decimal" validationCondition="GreaterEqual" formula1="0" isOptional="True"/>
		<column name="DistributionMax" displayName="Maximum" dataType="Double" validationType="Decimal" validationCondition="GreaterEqual" formula1="0" isOptional="True"/>	
	</dataSheet>

	<dataSheet name="AnnualHarvestOption" displayName="Annual Harvest Option" isSingleRow="True" viewClassName="SyncroSim.DGSim.AnnualHarvestOptionDataFeedView" viewClassAssembly="SyncroSim.DGSim">
		<column name="Specification" displayName="Specify Harvest As" dataType="Integer" validationType="List" formula1="0:Absolute Number|1:Percentage of Cohort|2:Percentage of Population"/>
		<column name="PopFilterSex" displayName="Pop Filter Sex" dataType="Integer" validationType="List" formula1="0:Male|1:Female"/>
		<column name="PopFilterMinAge" displayName="Pop Filter Min Age" dataType="Integer" validationType="WholeNumber" validationCondition="GreaterEqual" formula1="0"/>
		<column name="PopFilterMaxAge" displayName="Pop Filter Max Age" dataType="Integer" validationType="WholeNumber" validationCondition="GreaterEqual" formula1="0"/>
		<validation validationType="LessEqual" columns="PopFilterMinAge|PopFilterMaxAge"/>
	</dataSheet>

	<dataSheet name="AnnualHarvestValue" displayName="Annual Harvest Value" hasIteration="True" hasTimestep="True">
		<column name="StratumId" displayName="Stratum" dataType="Integer" validationType="Datasheet" formula1="Stratum" isOptional="True"/>
		<column name="Sex" dataType="Integer" validationType="List" formula1="0:Male|1:Female" isOptional="True"/>
		<column name="AgeClassId" displayName="Age Class" dataType="Integer" validationType="Datasheet" formula1="AgeClass" isOptional="True"/>
		<column name="Mean" dataType="Double" validationType="Decimal" validationCondition="GreaterEqual" formula1="0"/>
		<column name="DistributionType" displayName="Distribution" dataType="Integer" validationType="Datasheet" formula1="core_DistributionType" isOptional="True"/>
		<column name="DistributionSD" displayName="SD" dataType="Double" validationType="Decimal" validationCondition="Greater" formula1="0" isOptional="True"/>
		<column name="DistributionMin" displayName="Minimum" dataType="Double" validationType="Decimal" validationCondition="GreaterEqual" formula1="0" isOptional="True"/>
		<column name="DistributionMax" displayName="Maximum" dataType="Double" validationType="Decimal" validationCondition="GreaterEqual" formula1="0" isOptional="True"/>	
	</dataSheet>

	<dataSheet name="Migration" hasIteration="True" hasTimestep="True">
		<column name="FromStratumId" displayName="From Stratum" dataType="Integer" validationType="Datasheet" formula1="Stratum"/>
		<column name="ToStratumId" displayName="To Stratum" dataType="Integer" validationType="Datasheet" formula1="Stratum"/>
		<column name="Sex" dataType="Integer" validationType="List" formula1="0:Male|1:Female" isOptional="True"/>
		<column name="AgeClassId" displayName="Age Class" dataType="Integer" validationType="Datasheet" formula1="AgeClass" isOptional="True"/>
		<column name="MigrationRate" displayName="Migration Rate" dataType="Double" validationType="Decimal" validationCondition="Between" formula1="0" formula2="1" initOptionalVisible="True"/>
		<column name="DistributionType" displayName="Distribution" dataType="Integer" validationType="Datasheet" formula1="core_DistributionType" isOptional="True"/>
		<column name="DistributionSD" displayName="SD" dataType="Double" validationType="Decimal" validationCondition="Greater" formula1="0" isOptional="True"/>
		<column name="DistributionMin" displayName="Minimum" dataType="Double" validationType="Decimal" validationCondition="GreaterEqual" formula1="0" isOptional="True"/>
		<column name="DistributionMax" displayName="Maximum" dataType="Double" validationType="Decimal" validationCondition="GreaterEqual" formula1="0" isOptional="True"/>>
		<validation validationType="LessEqual" columns="DistributionMin|DistributionMax"/>
	</dataSheet>

	<dataSheet name="DemographicRateShift" displayName="Demographic Rate Shifts" hasIteration="True" hasTimestep="True">
		<column name="AgeClassId" displayName="Age Class" dataType="Integer" validationType="Datasheet" formula1="AgeClass"/>
		<column name="Fecundity" dataType="Double" validationType="Decimal" validationCondition="Between" formula1="-1"  formula2="1"/>
		<column name="Mortality" dataType="Double" validationType="Decimal" validationCondition="Between" formula1="-1"  formula2="1"/>
		<validation validationType="Unique" columns="Iteration|Timestep|AgeClassId"/>
	</dataSheet>

	<dataSheet name="Census" displayName="Census Data" hasTimestep="True">
		<column name="StratumId" displayName="Stratum" dataType="Integer" validationType="Datasheet" formula1="Stratum"/>
		<column name="MinimumPopulation" displayName="Minimum Population" dataType="Integer" validationType="WholeNumber" validationCondition="Greater" formula1="0"/>
		<column name="MaximumPopulation" displayName="Maximum Population" dataType="Integer" validationType="WholeNumber" validationCondition="Greater" formula1="0"/>
		<column name="MinimumMToFRatio" displayName="Minimum M:F Ratio" dataType="Double" validationType="Decimal" validationCondition="Between" formula1="0"  formula2="1" isOptional="True"/>
		<column name="MaximumMToFRatio" displayName="Maximum M:F Ratio" dataType="Double" validationType="Decimal" validationCondition="Between" formula1="0"  formula2="1" isOptional="True"/>
		<validation validationType="LessEqual" columns="MinimumMToFRatio|MaximumMToFRatio"/>
	</dataSheet>

	<dataSheet name="OutputPopulationSize" displayName="Population Size" hasIteration="True" hasTimestep="True">
		<column name="StratumId" displayName="Stratum" dataType="Integer" validationType="Datasheet" formula1="Stratum" allowDbNull="False" isIndex="True"/>
		<column name="Sex" dataType="Integer" validationType="List" formula1="0:Male|1:Female" allowDbNull="False" isIndex="True"/>
		<column name="AgeClassId" displayName="Age Class" dataType="Integer" validationType="Datasheet" formula1="AgeClass" allowDbNull="False" isIndex="True"/>
		<column name="Population" dataType="Double"/>
	</dataSheet>

	<dataSheet name="OutputHarvest" displayName="Harvest" hasIteration="True" hasTimestep="True">
		<column name="StratumId" displayName="Stratum" dataType="Integer" validationType="Datasheet" formula1="Stratum" allowDbNull="False" isIndex="True"/>
		<column name="Sex" dataType="Integer" validationType="List" formula1="0:Male|1:Female" allowDbNull="False" isIndex="True"/>
		<column name="AgeClassId" displayName="Age Class" dataType="Integer" validationType="Datasheet" formula1="AgeClass" allowDbNull="False" isIndex="True"/>
		<column name="Harvest" dataType="Double" validationCondition="GreaterEqual" formula1="0"/>
	</dataSheet>

	<dataSheet name="OutputRecruits" displayName="Recruits" hasIteration="True" hasTimestep="True">
		<column name="StratumId" displayName="Stratum" dataType="Integer" validationType="Datasheet" formula1="Stratum" allowDbNull="False" isIndex="True"/>
		<column name="MotherAgeClassId" displayName="Mother Age Class" dataType="Integer" validationType="Datasheet" formula1="AgeClass" allowDbNull="False" isIndex="True"/>
		<column name="OffspringSex" displayName="Offspring Sex" dataType="Integer" validationType="List" formula1="0:Male|1:Female" allowDbNull="False" isIndex="True"/>
		<column name="Recruits" dataType="Double" validationCondition="GreaterEqual" formula1="0" />
	</dataSheet>

	<dataSheet name="OutputMortality " displayName="Mortality" hasIteration="True" hasTimestep="True">
		<column name="StratumId" displayName="Stratum" dataType="Integer" validationType="Datasheet" formula1="Stratum" allowDbNull="False" isIndex="True"/>
		<column name="Sex" dataType="Integer" validationType="List" formula1="0:Male|1:Female" allowDbNull="False" isIndex="True"/>
		<column name="AgeClassId" displayName="Age Class" dataType="Integer" validationType="Datasheet" formula1="AgeClass" allowDbNull="False" isIndex="True"/>
		<column name="Mortality" dataType="Double" validationCondition="GreaterEqual" formula1="0" />
	</dataSheet>

	<dataSheet name="OutputPosteriorDistributionValue" displayName="Sampled Inputs by Iteration" hasIteration="True" hasTimestep="True">
		<column name="HasCensusData" dataType="Boolean"/>
		<column name="JulianDay" dataType="Integer"/>
		<column name="StratumId" displayName="Stratum" dataType="Integer" validationType="Datasheet" formula1="Stratum" isIndex="True"/>
		<column name="Sex" dataType="Integer" validationType="List" formula1="0:Male|1:Female" isIndex="True"/>
		<column name="AgeClassId" displayName="Age Class" dataType="Integer" validationType="Datasheet" formula1="AgeClass" isIndex="True"/>
		<column name="Variable" dataType="Integer" validationType="List" formula1="0:Harvest|1:Mortality|2:Offspring"/>
		<column name="IsFiltered" displayName="IsFiltered" dataType="Boolean"/>
		<column name="Value" dataType="Double"/>
	</dataSheet>

	<dataSheet name="RunControl" displayName="Run Control" isRunControl="True" viewClassName="SyncroSim.DGSim.RunControlDataFeedView" viewClassAssembly="SyncroSim.DGSim">
		<column name="StartJulianDay" displayName="Start Julian Day" dataType="Integer" defaultValue="1" validationType="WholeNumber" validationCondition="Between" formula1="1" formula2="365" format="d"/>
	</dataSheet>

	<dataFeed name="InitialPopulation" displayName="Initial Population" viewClassName="SyncroSim.DGSim.InitialPopulationDataFeedView" viewClassAssembly="SyncroSim.DGSim">
		<dataSheet name="InitialPopulationSize"></dataSheet>
		<dataSheet name="InitialPopulationDistribution"></dataSheet>
	</dataFeed>

	<dataFeed name="OffspringPerFemale" displayName="Offspring per Female" viewClassName="SyncroSim.DGSim.OffspringPerFemaleDataFeedView" viewClassAssembly="SyncroSim.DGSim">
		<dataSheet name="OffspringPerFemaleOption"></dataSheet>
		<dataSheet name="OffspringPerFemaleValue"></dataSheet>
	</dataFeed>

	<transformer name="Main" displayName="Demographic Population" className="SyncroSim.DGSim.DGSimTransformer" classAssembly="SyncroSim.DGSim">
		<dataSheet name="RunControl" type="Input"/>
		<dataSheet name="InitialPopulationSize" type="Input"/>
		<dataSheet name="InitialPopulationDistribution" type="Input"/>
		<dataSheet name="AgeClassRange" type="Input"/>
		<dataSheet name="OffspringPerFemaleOption" type="Input"/>
		<dataSheet name="OffspringPerFemaleValue" type="Input"/>
		<dataSheet name="AnnualizedMortalityRate" type="Input"/>
		<dataSheet name="AnnualHarvestOption" type="Input"/>
		<dataSheet name="AnnualHarvestValue" type="Input"/>
		<dataSheet name="Migration" type="Input"/>
		<dataSheet name="DemographicRateShift" type="Input"/>
		<dataSheet name="Census" type="Input"/>
		<dataSheet name="OutputPopulationSize" type="Output"/>
		<dataSheet name="OutputHarvest" type="Output"/>
		<dataSheet name="OutputRecruits" type="Output"/>
		<dataSheet name="OutputMortality" type="Output"/>
		<dataSheet name="OutputPosteriorDistributionValue" type="Output"/>
	</transformer>

	<transformer
		name="PopulationSizeReport"
		displayName="Population Size Summary"
		className="SyncroSim.DGSim.PopulationSizeReport"
		classAssembly="SyncroSim.DGSim"
		isExport="True">
	</transformer>

	<transformer
		name="HarvestReport"
		displayName="Harvest Summary"
		className="SyncroSim.DGSim.HarvestReport"
		classAssembly="SyncroSim.DGSim"
		isExport="True">
	</transformer>

	<transformer
		name="RecruitsReport"
		displayName="Recruits Summary"
		className="SyncroSim.DGSim.RecruitsReport"
		classAssembly="SyncroSim.DGSim"
		isExport="True">
	</transformer>

	<transformer
		name="MortalityReport"
		displayName="Mortality Summary"
		className="SyncroSim.DGSim.MortalityReport"
		classAssembly="SyncroSim.DGSim"
		isExport="True">
	</transformer>

	<transformer
		name="PosteriorDistributionReport"
		displayName="Sampled Inputs by Iteration"
		className="SyncroSim.DGSim.PosteriorDistributionReport"
		classAssembly="SyncroSim.DGSim"
		isExport="True">
	</transformer>

	<layout type="Project">
		<item name="Stratum"/>
		<item name="AgeClass"/>
	</layout>

	<layout type="Scenario">
		<item name="RunControl"/>
		<item name="InitialPopulation"/>
		<group name="DemographicParameters" displayName="Demographic Parameters">
			<item name="AgeClassRange"/>
			<item name="OffspringPerFemale"/>
			<item name="AnnualizedMortalityRate"/>
			<item name="DemographicRateShift"/>
		</group>
		<group name="Harvest">
			<item name="AnnualHarvestValue" displayName="Annual Harvest"/>
			<item name="AnnualHarvestOption" displayName="Options"/>
		</group>
		<item name="Migration"/>
		<item name="Census"/>
	</layout>

	<layout type="Export">
		<group name="SummaryReports" displayName="Summary Reports">
			<item name="PopulationSizeReport"/>
			<item name="HarvestReport"/>
			<item name="RecruitsReport"/>
			<item name="MortalityReport"/>
			<item name="PosteriorDistributionReport"/>
		</group>
	</layout>

	<layout type="Chart">
		<item name="Population" displayName ="Population" dataSheet="OutputPopulationSize" column="Population" filter="AgeClassId|Sex|StratumId"/>
		<item name="Harvest" displayName="Harvest" dataSheet="OutputHarvest" column="Harvest" filter="AgeClassId|Sex|StratumId"/>
		<item name="Recruits" displayName="Recruits" dataSheet="OutputRecruits" column="Recruits" filter="MotherAgeClassId|OffspringSex|StratumId"/>
		<item name="Mortality" displayName="Mortality" dataSheet="OutputMortality" column="Mortality" filter="AgeClassId|Sex|StratumId"/>
	</layout>

	<updateProvider
		className="SyncroSim.DGSim.DGSimUpdates"
		classAssembly="SyncroSim.DGSim">
	</updateProvider>

</package>